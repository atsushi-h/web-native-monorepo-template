<!--
Based on ai-coding-project-boilerplate by Shinsuke Kagawa
https://github.com/shinpr/ai-coding-project-boilerplate
-->

# 技術設計決定ガイド（作業計画書統合版）

## 目的

本プロジェクトでは、アーキテクチャ決定を作業計画書（PLAN）の技術設計セクションに統合して管理します。

## 技術設計決定が必要なケース

作業計画書（PLAN）の技術設計セクションで詳細な設計決定を記載すべき案件：

- **型システム変更**: 共有型定義の追加・変更
- **データフロー変更**: API通信、状態管理の変更
- **アーキテクチャ変更**: パッケージ構造、依存関係の変更
- **5ファイル以上の変更**: 大規模な機能追加・リファクタリング
- **外部依存追加**: 新しいnpmパッケージの導入

### モノレポ固有のケース
- **ワークスペース間の依存関係変更**: packages間の参照追加・変更
- **ビルド設定の変更**: Turbo、Vite、Expoの設定変更
- **プラットフォーム固有実装**: Web/Native専用機能の追加
- **共有UIコンポーネントの追加**: Tamaguiコンポーネントの作成

### 推奨
- パフォーマンス最適化（バンドルサイズ、ビルド時間）
- セキュリティ強化（認証、CORS設定）
- 拡張性向上（プラグインシステム、抽象化）

## 作業計画書（PLAN）での技術設計記載方法

作業計画書の技術設計セクションには以下を含める：

### 1. 問題分析
- 現在の課題と影響範囲の特定
- 解決すべき技術的問題の明確化

### 2. 選択肢検討
- 複数案の比較とトレードオフ分析
- 各案のメリット・デメリット

### 3. 決定理由
- なぜその選択肢を選んだか
- 将来の保守性への影響

### 4. 実装ガイドライン
- 具体的な実装手順
- 注意すべきポイント

## モノレポ固有の注意点

- **パッケージ横断的変更**: packages間の影響を考慮
- **プラットフォーム固有実装**: Web/Nativeでの違いを明確化
- **共通インターフェース**: 再利用性を重視
- ビルド時間への影響を考慮した決定

## 参照した手法・原則
- **ADR手法**: Michael Nygard「Documenting Architecture Decisions」（2011）
- **Design Doc文化**: Google Engineering Practices Documentation
- **トレードオフ分析**: Software Architecture in Practice（Bass, Clements, Kazman）
